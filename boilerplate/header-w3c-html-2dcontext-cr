<!DOCTYPE html>
<!--SET TRNAME=2dcontext-->
<!--SET DEVURL=http://www.w3.org/html/wg/drafts/2dcontext/html5_canvas_CR/-->
<!--SET COMPONENT=HTML Canvas 2D Context (editor: Ian Hickson)-->
<html lang="en-US-x-Hixie">
  <head>
    <meta charset='utf-8'>
    <title>HTML Canvas 2D Context</title>
<!--BOILERPLATE middle-head-->
    <h1>HTML Canvas 2D Context</h1>
    <h2 class="no-num no-toc"></h2>
<!--BOILERPLATE middle-w3c-version-->
      <dt>Previous Version:</dt>
      <dd><a href='http://www.w3.org/TR/2013/CR-2dcontext-20130806/'>http://www.w3.org/TR/2013/CR-2dcontext-20130806/</a></dd>
      <dt id='specification-editors'>Editors:</dt>
      <dd>W3C:</dd>
      <dd><a href="mailto:cabanier@adobe.com">Rik Cabanier</a>, Adobe Systems, Inc.</dd>
      <dd><a href="mailto:eliot.graff@microsoft.com">Eliot Graff</a>, Microsoft Corporation</dd>
      <dd><a href="mailto:jaymunro@microsoft.com">Jay Munro</a>, Microsoft Corporation</dd>
      <dd><a href="mailto:wiltzius@google.com">Tom Wiltzius</a>, Google, Inc.</dd>
      <dd>WHATWG:</dd>
      <dd><a href="mailto:ian@hixie.ch">Ian Hickson</a>, Google, Inc.</dd>
   </dl>
<!--BOILERPLATE middle-w3c-copyright-->

  <h2 class="no-num no-toc">Abstract</h2>

  <p>This specification defines the 2D Context for the HTML
  <code>canvas</code> element. The 2D Context provides
   objects, methods, and properties to draw and manipulate 
   graphics on a <code>canvas</code> drawing surface.</p>

  <h2 class="no-num no-toc">Status of This Document</h2>

<!--BOILERPLATE middle-feedback-->

  <h3 class="no-num no-toc">Commenting on this Last Call Working Draft</h3>
  <p>
    This Last Call period for this Working Draft ends 20 June 2014.
    To make Last Call comments, submit them via using
    <a href="https://www.w3.org/Bugs/Public/enter_bug.cgi?product=HTML%20WG&component=CR%20HTML%20Canvas%202D%20Context">our public bug database</a>.
    If you cannot do this then you can also e-mail feedback to <a
    href="mailto:public-html-comments@w3.org">public-html-comments@w3.org</a>
    (<a href="mailto:public-html-comments-request@w3.org?subject=subscribe">subscribe</a>,
    <a href="http://lists.w3.org/Archives/Public/public-html-comments/">archives</a>),
    and arrangements will be made to transpose the comments to our
    public bug database.</p>

  <h3 class="no-num no-toc">Changes causing the progression back to Last Call</h3>
  <p>This Last Call Working Draft incorporates changes made by the <a href="https://www.w3.org/WAI/PF/HTML/wiki/Canvas">Canvas Accessibility Sub-Group</a> (<a
  href="https://www.w3.org/WAI/PF/HTML/wiki/Canvas/Meetings/Minutes#Canvas_Accessibility_Teleconferences:_2014">minutes</a>)
  in response to <a
  href="http://lists.w3.org/Archives/Public/public-html-admin/2013Sep/0013.html">feedback
  from the HTML Accessibility Task Force</a> and adds support for visual focus indicators (<a href="#dom-context-2d-drawfocusifneeded">drawFocusIfNeeded()</a>)
  and a method for updating the accessibility API of the location of fallback elements that are representative of the corresponding hit region location (<a href="#hit-regions">Hit Regions</a>).  These features were designed to be forward compatible with <a href="http://www.w3.org/TR/2013/WD-2dcontext2-20131029/#hit-regions">Canvas 2D Context, Level 2</a>.

  <p>
    The following are the specific changes that were made to this
    specification in updating it for a return to Last Call.

    <h4 class="no-num no-toc">Removals</h4>
      <p>The following are at-risk features that have been removed from the
       HTML Canvas 2D Context Level 1 specification, and pushed to to the
       HTML Canvas 2D Context level 2 specification:
        <ul>
          <li>The "Path objects" section was removed, along with references
          in other sections to path versions of methods defined on those sections.
          <li>The <code>ellipse()</code> method was removed. (It's not yet
           implemented in any user agents, and ellipses can be drawn with
           the <code>arc()</code> method.
          <li>The attributes
           <code>actualBoundingBoxLeft</code>,
           <code>actualBoundingBoxRight</code>,
           <code>fontBoundingBoxAscent</code>,
           <code>fontBoundingBoxDecent</code>,
           <code>emHeightAscentNo</code>,
           <code>hangingBaseline</code>,
           <code>alphabetBaseline</code>,
           and
           <code>ideographicBaseline</code>
           were removed from the <code>TextMetrics</code> object returned by the
           <code>measureText()</code> method.
          <li>The attributes
            <code>path</code>,
            <code>parentID</code>,
            <code>cursor</code>,
            <code>label</code>,
            <code>role</code>,
            and
            <code>region</code>
            were removed from the <code>HitRegionOptions</code>
            dictonary.
          <li>The <code>scrollPathIntoView()</code> method was removed.
          <li>The <code>drawCustomFocusRing()</code> method was removed.
        </ul>

    <h4 class="no-num no-toc">Additions/changes</h4>
      <p>The following are additions and changes made to this
        specification after the previous publication.
        <ul>
          <li><b>Focus rings</b>
            <ul>
              <li>Changed name of the name of the
               <code>drawSystemFocusRing()</code> method to
               <code>drawFocusIfNeeded()</code>.
               It was felt that focus is not necessarily a ring.
            </ul>
          <li><b>Hit regions</b>
            <ul>
              <li>The initial hit region dictionary has been reduced to two
               elements, <code>control</code> and <code>id</code>. The other
               items in the dictionary were not going to be implemented for
               the Level 1 spec.
              <li>The hit region section has been edited to only work with
               the current path, not the path object as initially specified.
               Path object was an at risk feature that was removed. The
               level 2 spec will address the use of the path object.
              <li>The <code>clearHitRegions()</code> method was added. This
               method clears all hit regions for a given canvas without
               requiring individual control or id values. It is similar in
               operation to the <code>clearRect()</code> methods.
            </ul>
          <li><b>Mouse events</b>
            <ul>
             <li>The <code>mouseEvent</code> interface was updated to not use
              re-targeting of a mouse event. It returns the id of the hit
              region as a parameter to the event object. The developer can
              handle the <code>mouseEvent</code> as needed.
            </ul>
        </ul>

<!--BOILERPLATE middle-w3c-html-module-status-->
<!--BOILERPLATE middle-w3c-html-pp-->

  <h2 class="no-num no-toc" id="contents">Table of Contents</h2>
<!--toc-->
  <hr>

<!--BOILERPLATE middle-w3c-html-module-conf-->
